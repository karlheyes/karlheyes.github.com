<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-loose.dtd">
<html>
  <head>
    <title>Icecast v2 KH branches</title>
    <meta name="description" content="This page contains information about the current icecast development" />
    <meta name="keywords" content="icecast, streaming, trunk, kh, redirect, slave, bandwidth, limiting, flv, flash, charset, ices, jack, karl, karlH" />
  </head>
  <body>
    <h2>Icecast -kh branches</h2>
    <!--
    <form action="https://www.paypal.com/cgi-bin/webscr" method="post">
        <input type="hidden" name="cmd" value="_s-xclick">
        <input type="image" src="https://www.paypal.com/en_GB/i/btn/btn_donate_LG.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online.">
        <img alt="" border="0" src="https://www.paypal.com/en_GB/i/scr/pixel.gif" width="1" height="1">
        <input type="hidden" name="encrypted" value="-----BEGIN PKCS7-----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-----END PKCS7-----
        ">
    </form>
    -->
    <form action="https://www.paypal.com/cgi-bin/webscr" method="post">
    <input type="hidden" name="cmd" value="_s-xclick">
    <input type="hidden" name="hosted_button_id" value="D6WS9B54UNAEJ">
    <input type="image" src="https://www.paypalobjects.com/en_US/GB/i/btn/btn_donateCC_LG.gif" border="0" name="submit" alt="PayPal â€” The safer, easier way to pay online.">
    <img alt="" border="0" src="https://www.paypalobjects.com/en_GB/i/scr/pixel.gif" width="1" height="1">
    </form>

    <p>This is the current set of branches of ices2 and icecast2. They extend on the offical
    release (currently 2.3.2) with features that may be (if found to be working out well) merged
    into the next offical release.  You can contact me karl &lt;at&gt; xiph.org</p>

    <br/>

    <p>Main releases</p>

    Latest development work is now up on github <a href="https://github.com/karlheyes/icecast-kh">Here</a>
    <br/><br/>

    <a href="https://github.com/downloads/karlheyes/icecast-kh/icecast-2.3.3-kh3.tar.gz">2.3.3-kh3 </a> <br/>
    <a href="https://github.com/downloads/karlheyes/icecast-kh/icecast-2.3.3-kh3_setup.exe">2.3.3-kh3 (win32) </a> <br/>
    <p>07/08/2012</p>
    <ul>
    <li>crash fix with invalid stats handle with fallback to file
    <li>merge Opus module from trunk
    <li>Force NTPL to prefer writers over readers for rwlocks
    <li>bitrate estimation scales better now.
    <li>where possible, use pread to avoid mutex locks on file reads, win32 needs fixing up
    <li>make xsl lookup cache scale better, force a reload via a separate thread to prevent
    worker stalls.
    <li>various tunings for client rescheduling
    <li>small changes to client balancing across workers
    <li>small changes to log messages.
    <li>reference a git hash code is available
    </ul>
    <br/>

    <a href="https://github.com/downloads/karlheyes/icecast-kh/icecast-2.3.3-kh2.tar.gz">2.3.3-kh2 </a> <br/>
    <a href="https://github.com/downloads/karlheyes/icecast-kh/icecast-2.3.3-kh2_setup.exe">2.3.3-kh2 (win32) </a> <br/>
    <p>15/07/2012</p>
    <ul>
        <li>sent value passed to listener_remove in kh1 could be wrong on 32bit setups</li>
        <li>avoid clearing queue on relay restart, it exposed a crash case with lock changes</li>
        <li>make TCP sockets not pass to on-[dis]connect scripts. useless work avoided</li>
        <li>hijack source fix required with lock changes, to avoid mis-calculated lags drops</li>
        <li>refcount bug missed for sending to master relays. possible memory corruption</li>
        <li>more worker balancing changes, to spread loading more evenly.</li>
        <li>missing delay for blocking file client, has an effect of higher cpu usage</li>
        <li>rare override failure case handled better.</li>
        <li>various minor fixes, including log format, memory leak and stats.</li>
    </ul>
    <br/>

    <a href="https://github.com/downloads/karlheyes/icecast-kh/icecast-2.3.3-kh1.tar.gz">2.3.3-kh1 </a> <br/>
    <a href="https://github.com/downloads/karlheyes/icecast-kh/icecast-2.3.3-kh1_setup.exe">2.3.3-kh1 (win32) </a> <br/>
    <p>24/06/2012</p>
    <ul>
    <li>Big change with rwlocks replacing mutexes. It's internal but can have a big effect
    on load pattern usage. In cases with many listeners on a single mount we can now
    spread clients across all workers. A number of balancing changes were done to
    assist in localising related clients but may need more tweaking.  A side effect
    of these changes is that queues are only shrunk when there are no listeners, so
    queues can take up more memory than usual but that could of happened before.</li>
    <li>fix bad reference for file-based content like intro/fallback with FLV</li>
    <li>make the minimum duration of an on-demand relay last until it would be classed as
    working, any less then it could be skipped or disabled for a short time.</li>
    <li>skip entity decoding if none required.  For cases where metadata has &amp; causing
    the libxml2 to spit out warnings like "no name".</li>
    <li>If no sockets are opened at the start then exit.</li>
    <li>Win32. standardize on format for date, back to proper timezone numbers</li>
    <li>Log AAC samplerate change in stream.</li>
    <li>Add &lt;inactivity-timeout&gt; in &lt;limits&gt; to stop icecast when there are no sources</li>
    <li>Add &lt;x-forwarded-for&gt; into &lt;paths&gt; for IP substitution from load balancers</li>
    <li>Added referer= to listener_add POST.</li>
    <li>Added sent= to listener_remove POST (bytes)</li>
    <li>sync ebml/webm format parser with 2.3.3, not tried it myself.</li>
    <li>minor tweaks for rescheduling on high bitrate streams, terminating sources, URL
    auth handling if disabled and busy relay restarting.</li>
    </ul>
    <br/>

    <a href="https://github.com/downloads/karlheyes/icecast-kh/icecast-2.3.2-kh33.tar.gz">2.3.2-kh33 </a> <br/>
    <a href="https://github.com/downloads/karlheyes/icecast-kh/icecast-2.3.2-kh33_setup.exe">2.3.2-kh33 (win32) </a> <br/>
    <p>19/05/2012</p>
    <ul>
    <li>Expand file open limit to match &lt;clients&gt; if possible, warn if less.
    <li>Fix possible client leak. legacy code removal.
    <li>updated mpeg parser to be more specific on bits to match for. It should increase
    the tolerance for changes in the stream format (CRC, samplerate etc).
    <li>reload forces an update of active streams, was missing from a previous update.
    <li>Realplayer based apps fix for aac+. Assumes certain response header.
    <li>drop requirement for matching each / in mount-name.
    <li>content type needed truncating in rare cases before format could be set up
    <li>prevent too much being read in one go when reading ogg data.
    <li>internal change to swapping of hijacked clients, possible crash fix.
    <li>fallback over multiple mounts works again 
    <li>Add timeout for sync mode handling. Should never trigger really.
    <li>a few small log reporting changes.
    </ul>
    <br/>

    <a href="https://github.com/downloads/karlheyes/icecast-kh/icecast-2.3.2-kh32.tar.gz">2.3.2-kh32 </a> <br/>
    <a href="https://github.com/downloads/karlheyes/icecast-kh/icecast-2.3.2-kh32_setup.exe">2.3.2-kh32 (win32) </a> <br/>
    <p>17/04/2012</p>
    <ul>
    <li>Reduce memory copies with large stream lists from master
    <li>internal FLV buffer management cleaned up, possible crash case avoided.
    <li>return 501 instead of 400 for HEAD requests, helps some players.
    <li>stats updating reduced now that relays always have clients, also reduce locking.
    <li>missing user/pass setting for metadata update from shoutcast style source and url auth
    <li>Experimental. send variable block framing if requested by listener
    <li>Experimental. allow &lt;include&gt;/dir/*.xml&lt;/include&gt; in &lt;icecast&gt; for
    breaking xml up
    <li>Experimental. webm work by David Richards
    <li>Experimental.  source client hijacking. replace existing source with another. has to
    to allowed via auth url currently to prevent bouncing of clients with auto-reconnect.
    <li>Add duration to all access, error and playlist logs, allows re-opening them after a
    number of seconds elapsed, 0 by default. set size trigger to 50Meg default.
    <li>possible busy loop in kh31 in cases where fallback is defined
    <li>fix for win32 error reporting and missing uninstall link in programs list
    <li>added "timeout" (default 5) and "on_error_wait" (default 60) to auth url options.
    <li>sync up headers handled by auth cmd with auth url.
    <li>Added missing stream format checks for certain error cases.
    <li>speedup for icy metadata and avoid length bug on inline urls.
    <li>A number of possible lock fixes and checks are now added for odd cases.
    </ul>

    <br/>
</body>
</html>
